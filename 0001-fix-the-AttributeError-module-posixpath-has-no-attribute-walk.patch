From a94776b22f0a50116c8c017a08e2a6e9646fd4f5 Mon Sep 17 00:00:00 2001
From: maminjie <maminjie1@huawei.com>
Date: Tue, 13 Oct 2020 20:15:41 +0800
Subject: [PATCH] fix the AttributeError: module 'posixpath' has no attribute
 'walk'

---
 support/mixer-qt4/SConscript | 16 ++++++----------
 1 file changed, 6 insertions(+), 10 deletions(-)

diff --git a/support/mixer-qt4/SConscript b/support/mixer-qt4/SConscript
index 1d57984..eebb8ca 100644
--- a/support/mixer-qt4/SConscript
+++ b/support/mixer-qt4/SConscript
@@ -28,17 +28,13 @@ Import( 'env' )
 
 if env['BUILD_MIXER'] == 'true':
     e = env.Clone()
-
-    def findfiles( arg, dirname, names ):
-        for name in names:
-            if name.startswith("."):
-                names.remove(name)
-        for name in names:
-            if '.pyc' not in name and '.in' not in name:
-                arg.append( os.path.join( dirname, name ) )
-
+    
     pythonfiles = [ 'ffado/config.py' ]
-    os.path.walk( "ffado", findfiles, pythonfiles )
+    for root, dirs, files in os.walk( "ffado" ):
+        for name in files:
+            if name.endswith( '.pyc' ) or '.in' in name or name.startswith("."):
+                continue
+            pythonfiles.append( os.path.join( root, name ) )
 
     e.ScanReplace( "ffado/config.py.in" )
     e.Depends( "ffado/config.py", "#/SConstruct" )
-- 
2.23.0

